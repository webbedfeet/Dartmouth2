<!DOCTYPE html>
<html>
<head>
  <title>Probability machines</title>
  <meta charset="utf-8">
  <meta name="description" content="Probability machines">
  <meta name="author" content="Abhijit Dasgupta &amp; James Malley">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
    <link rel="stylesheet" href = "assets/css/ribbons.css">

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
    <!-- END LOGO SLIDE -->
    

    <!-- TITLE SLIDE -->
    <!-- Should I move this to a Local Layout File? -->
    <slide class="title-slide segue nobackground">
      <hgroup class="auto-fadein">
        <h1>Probability machines</h1>
        <h2>Risk estimation in a post-parameter world</h2>
        <p>Abhijit Dasgupta &amp; James Malley<br/></p>
      </hgroup>
          </slide>

    <!-- SLIDES -->
      <slide class="" id="slide-1" style="background:url(figure/Ratu-Boko-Yogya.jpg) no-repeat;
background-size: cover;
">
<hgroup>

</hgroup>
<article>
<h2 style="color:red;text-align:center;width:100%;position:absolute;line-height:100px">Gates to the post-parameter world!!!</h2>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-2" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Effect size</h2>
</hgroup>
<article>
<p>Let&#39;s go back to your first regression course</p>

<blockquote style="color:#66a;font-size:30px;font-weight:bold;font-style:italic;margin:1em 3em;">
"How much does the outcome change, on average, when a predictor changes
by one unit, all other predictors remaining the same?"
</blockquote>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-3" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Effect size</h2>
</hgroup>
<article>
<p>Let&#39;s go back to your first regression course</p>

<blockquote style="color:#66a;font-size:30px;font-weight:bold;font-style:italic;margin:1em 3em;">
"How much does the outcome change, on average, when a predictor changes
by one unit, all other predictors remaining the same?"
</blockquote>

<p>This is based on the concept of <span style="font-style:italic;text-decoration:underline;">counterfactuals</span></p>

<ul class = "build">
<li>What would happen <span style="font-weight:bold">if</span> a predictor changed by 1 unit keeping everything else the same?</li>
<li>This is not something we can observe, but only something we can conceptualize</li>
<li>Using multiple machines, we can actually estimate these counterfactuals directly <span style="font-weight:bold">for each observation!!!</span></li>
<li>We don&#39;t need parameters in the model; we can do this nonparametrically</li>
<li>Requires us to think about what exactly are the effects we want to interrogate</li>
</ul>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-4" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Counterfactuals</h2>
</hgroup>
<article>
<table border="0">
<tr>
<td align=center> X = 1 </td><td align="center"> X = 0 </td>
</tr>
<tr>
<td><img src="figure/60644_1600x1200-wallpaper-cb1351789122.jpg" height=300></td>
<td><img src="figure/54818_1600x1200-wallpaper-cb1340033515.jpg" height=300> </td>
</tr>
</table>

<p>The counterfactual argument is, in essence</p>

<p style="text-align:center"> If we put an observation in the other landscape, what would it do? </p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-5" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Counterfactual machine</h2>
</hgroup>
<article>
<p><img src="figure/flowchart.001.png" alt=""></p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-6" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Counterfactual machine</h2>
</hgroup>
<article>
<p><img src="figure/flowchart.002.png" height=650></p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-7" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Counterfactual machine</h2>
</hgroup>
<article>
<p><img src="figure/flowchart.003.png" height=650></p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-8" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Counterfactual machine</h2>
</hgroup>
<article>
<ul>
<li>PM\(_1\) captures the landscape for X=1</li>
<li>PM\(_0\) captures the landscape for X=0</li>
</ul>

<p>Now put each observation in each landscape and record its predicted outcome</p>

<p>Note, for each observation we now have a \(p_1\) and a $p_0$</p>

<p>Now we can compute <span style="color:blue;font-style:italic"> conditional odds ratios </span> using
\[ OR = \frac{p_1(1-p_0)}{(1-p_1)p_0}\]
for each observation, and look at group-specific odds ratios by averaging or taking medians</p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-9" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Simulations</h2>
</hgroup>
<article>
<p>We generate data from a <em>logistic regression</em> model with </p>

<ul>
<li>10 independent binary features</li>
<li>3 features associated with outcome to various degrees</li>
<li>7 features not associated with outcome (to mimic sparseness)</li>
</ul>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-10" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Simulations</h2>
</hgroup>
<article>
<p>We fit three models to the generated data</p>

<ul>
<li><p>Main effects logistic regression <br>
<code>glm(y~x1+x2+x3+..., family=binomial)</code></p></li>
<li><p>Main effects + two-way interactions logistic regression <br>
<code>glm(y~(x1+x2+x3+...)^2, family=binomial)</code></p></li>
<li><p>Random forest regression <br>
<code>randomForest(y~x1+x2+x3+...)</code></p></li>
</ul>

<p>For this entire exercise, <span style="font-weight:bold">we do not change this code</span></p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-11" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Simulations</h2>
</hgroup>
<article>
<p><img src="figure/Fig2.png" style="width:500px; float: left; margin-bottom: 15px; margin-right:3px"></p>

<p>Look at a main effects model</p>

<ul>
<li>All 3 are unbiased</li>
<li>RF does as well as logistic regression for efficiency</li>
</ul>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="segue dark" id="slide-12" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>WARNING: Soapbox time</h2>
</hgroup>
<article>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-13" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Logistic regression and odds ratios</h2>
</hgroup>
<article>
<p>Logistic regression (the industry standard) gives us odds ratios (the industry standard)</p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-14" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Logistic regression and odds ratios</h2>
</hgroup>
<article>
<p>Logistic regression (the industry standard) gives us odds ratios (the industry standard)</p>

<p style="font-size:50px;text-align:center">Please try explaining what an odds ratio is</p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-15" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Logistic regression and odds ratios</h2>
</hgroup>
<article>
<p>Logistic regression (the industry standard) gives us odds ratios (the industry standard)</p>

<ul>
<li><p>The odds ratio is interpreted as a risk ratio</p>

<ul>
<li>Can only do this when the outcome is rare</li>
</ul></li>
<li><p>The odds ratio might be reasonable for gamblers (Hello, Bernoullis), but probably not for clinicians</p></li>
<li><p>If I had my way, we&#39;d report either risk ratios or risk differences</p></li>
</ul>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="segue dark" id="slide-16" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Now back to regular programming</h2>
</hgroup>
<article>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-17" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Counterfactual machine</h2>
</hgroup>
<article>
<p>We have individual \(p_1\) and \(p_0\), so we can directly compute </p>

<ul>
<li>risk differences \[ RD = p_1 - p_0 \]</li>
<li>risk ratios \[ RR = p_1/p_0 \]</li>
</ul>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-18" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Multiple machines model</h2>
</hgroup>
<article>
<h3>What about interactions?</h3>

<p>Since we have a way of estimating counterfactuals, estimating conditional interaction effects are straightforward</p>

<p>Make 4 machines to &quot;capture landscapes&quot; when</p>

<ul>
<li>X1 = 0, X2 = 0 (\(\rightarrow p_{00}\))</li>
<li>X1 = 1, X2 = 0 (\(\rightarrow p_{10}\))</li>
<li>X1 = 0, X2 = 1 (\(\rightarrow p_{01}\))</li>
<li>X1 = 1, X2 = 1 (\(\rightarrow p_{11}\))</li>
</ul>

<p>Now compute the appropriate contrast (\(p_{11} - p_{10} - p_{01} + p_{00}\)) or ratio 
\[\frac{p_{11}(1-p_{10})}{p_{10}(1-p_{11})}/\frac{p_{01}(1-p_{00})}{p_{00}(1-p_{01})}\]</p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-19" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>Multiple machines models</h2>
</hgroup>
<article>
<p><img src="figure/Fig5a.png" style="width:450px; float: left; margin-bottom: 15px; margin-right:3px">
<img src="figure/Fig5b.png" style="width:450px; float: left; margin-bottom: 15px; margin-right:3px"></p>

<p style="clear:both;"></p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-20" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>More about interactions</h2>
</hgroup>
<article>
<p>The Counterfactual machine is cumbersome when you have many features.</p>

<p>We can actually do a faster scan of the data to find 2-way interactions</p>

<p>We call it the <span style="color:blue;font-weight:bold">Interactor</span></p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-21" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>The Interactor</h2>
</hgroup>
<article>
<p>We fit one PM to the data and get predicted probabilities</p>

<ul>
<li>Average probabilities over X1=1, X2=1 \(\rightarrow P_{11}\)</li>
<li>Average probabilities over X1=0, X2=1 \(\rightarrow P_{01}\)</li>
<li>Average probabilities over X1=1, X2=0 \(\rightarrow P_{10}\)</li>
<li>Average probabilities over X1=0, X2=0 \(\rightarrow P_{00}\)</li>
</ul>

<p>We can now create classical interaction plots either on natural or logit scale</p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-22" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>The Interactor</h2>
</hgroup>
<article>
<p><img src="figure/Fig6a.png" style="width:450px; float: left; margin-bottom: 15px; margin-right:3px">
<img src="figure/Fig6b.png" style="width:450px; float: left; margin-bottom: 15px; margin-right:3px"></p>

<p style="clear:both;"></p>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-23" style="background: no-repeat;
background-size: cover;
">
<hgroup>
<h2>The Interactor</h2>
</hgroup>
<article>
<h3>How about when we need to scan an entire genome?</h3>

<ol>
<li>Run 1 PM on the dataset</li>
<li>Compute interaction contrasts for each pair of features </li>
<li>Create an interaction heatmap to find interaction hotspots</li>
<li>Drill down (MDS, more analyses)</li>
</ol>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-24" style="background:url(figure/Ratu-Boko-Yogya.jpg) no-repeat;
background-size: cover;
">
<hgroup>

</hgroup>
<article>

</article>
<!-- Presenter notes -->
</slide>

      <slide class="" id="slide-25" style="background:url(figure/img_6940.jpg) no-repeat;
background-size: cover;
">
<hgroup>
<h2>On to the post-parameter ecosystem</h2>
</hgroup>
<article>

</article>
<!-- Presenter notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>

  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
<!-- Grab CDN jQuery, fall back to local if offline -->
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery-1.7.min.js"><\/script>')</script>
<!-- Load Javascripts for Widgets -->
<!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script> -->
<script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
</html>